"use strict";!function(n,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(["jquery","googlemaps!"],t):n.GMaps=t()}(this,function(){function t(n,t){if(n===t)return n;for(var i in t)void 0!==t[i]&&(n[i]=t[i]);return n}function o(n,t){var i,u=Array.prototype.slice.call(arguments,2),r=[],f=n.length;if(Array.prototype.map&&n.map===Array.prototype.map)r=Array.prototype.map.call(n,function(n){var i=u.slice(0);return i.splice(0,0,n),t.apply(this,i)});else for(i=0;i<f;i++)callback_params=u,callback_params.splice(0,0,n[i]),r.push(t.apply(this,callback_params));return r}function s(n){for(var t=[],i=0;i<n.length;i++)t=t.concat(n[i]);return t}function i(n,t){return n=n.replace("#",""),"jQuery"in window&&t?$("#"+n,t)[0]:document.getElementById(n)}var u,h,r,c,f=function(n,t){for(var r,u,e,i=0;i<n.length;i++)n[i]instanceof google.maps.LatLng||(n[i]=0<n[i].length&&"object"==typeof n[i][0]?f(n[i],t):(e=u=void 0,u=(r=n[i])[0],e=r[1],t&&(u=r[1],e=r[0]),new google.maps.LatLng(u,e)));return n},n=(u=document,h=function(n){function g(n,t){var h,c="",e=window.context_menu[f.el.id][n],u,s,a,o;for(r in e)e.hasOwnProperty(r)&&(h=e[r],c+='<li><a id="'+n+"_"+r+'" href="#">'+h.title+"<\/a><\/li>");if(i("gmaps_context_menu")){u=i("gmaps_context_menu");u.innerHTML=c;for(var l=u.getElementsByTagName("a"),v=l.length,r=0;r<v;r++)s=l[r],google.maps.event.clearListeners(s,"click"),google.maps.event.addDomListenerOnce(s,"click",function(i){i.preventDefault();e[this.id.replace(n+"_","")].action.apply(f,[t]);f.hideContextMenu()},!1);a=(o=function(n){var t=0,i=0;if(n.getBoundingClientRect){var r=n.getBoundingClientRect(),u=-(window.scrollX||window.pageXOffset),f=-(window.scrollY||window.pageYOffset);return[r.left-u,r.top-f]}if(n.offsetParent)for(;t+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;);return[t,i]}.apply(this,[f.el]))[0]+t.pixel.x-15;o=o[1]+t.pixel.y-15;u.style.left=a+"px";u.style.top=o+"px"}}function nt(t,i){google.maps.event.addListener(t,i,function(t){null==t&&(t=this);n[i].apply(this,[t]);f.hideContextMenu()})}var y,e,p,w;if("object"!=typeof google||!window.google.maps)return"object"==typeof console&&window.console.error&&console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js."),function(){};if(!this)return new h(n);n.zoom=n.zoom||15;n.mapType=n.mapType||"roadmap";var r,o=function(n,t){return void 0===n?t:n},f=this,s=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],c=["mousemove","mouseout","mouseover"],k=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],l=n.el||n.div,d=n.markerClusterer,a=google.maps.MapTypeId[n.mapType.toUpperCase()],tt=new google.maps.LatLng(n.lat,n.lng),it=o(n.zoomControl,!0),rt=(b=n.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"}).style||"DEFAULT",ut=b.position||"TOP_LEFT",ft=o(n.panControl,!0),et=o(n.mapTypeControl,!0),b=o(n.scaleControl,!0),o=o(n.streetViewControl,!0),v={},a={zoom:this.zoom,center:tt,mapTypeId:a},o={panControl:ft,zoomControl:it,zoomControlOptions:{style:google.maps.ZoomControlStyle[rt],position:google.maps.ControlPosition[ut]},mapTypeControl:et,scaleControl:b,streetViewControl:o,overviewMapControl:!0};if(this.el="string"==typeof n.el||"string"==typeof n.div?-1<l.indexOf("#")?i(l,n.context):function(n,t){return n=n.replace(".",""),("jQuery"in this&&t?$("."+n,t):document.getElementsByClassName(n))[0]}.apply(this,[l,n.context]):l,void 0===this.el||null===this.el)throw"No element defined.";for(window.context_menu=window.context_menu||{},window.context_menu[f.el.id]={},this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=n.zoom,this.registered_events={},this.el.style.width=n.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=n.height||this.el.scrollHeight||this.el.offsetHeight,google.maps.visualRefresh=n.enableNewStyle,r=0;r<k.length;r++)delete n[k[r]];for(1!=n.disableDefaultUI&&(a=t(a,o)),v=t(a,n),r=0;r<s.length;r++)delete v[s[r]];for(r=0;r<c.length;r++)delete v[c[r]];for(this.map=new google.maps.Map(this.el,v),d&&(this.markerClusterer=d.apply(this,[this.map])),this.buildContextMenu=function(n,t){var r,u;"marker"===n?(t.pixel={},(r=new google.maps.OverlayView).setMap(f.map),r.draw=function(){var i=r.getProjection(),u=t.marker.getPosition();t.pixel=i.fromLatLngToContainerPixel(u);g(n,t)}):g(n,t);u=i("gmaps_context_menu");setTimeout(function(){u.style.display="block"},0)},this.setContextMenu=function(n){var e,r,t,o;window.context_menu[f.el.id][n.control]={};t=u.createElement("ul");for(e in n.options)n.options.hasOwnProperty(e)&&(r=n.options[e],window.context_menu[f.el.id][n.control][r.name]={title:r.title,action:r.action});t.id="gmaps_context_menu";t.style.display="none";t.style.position="absolute";t.style.minWidth="100px";t.style.background="white";t.style.listStyle="none";t.style.padding="8px";t.style.boxShadow="2px 2px 6px #ccc";i("gmaps_context_menu")||u.body.appendChild(t);o=i("gmaps_context_menu");google.maps.event.addDomListener(o,"mouseout",function(n){n.relatedTarget&&this.contains(n.relatedTarget)||window.setTimeout(function(){o.style.display="none"},400)},!1)},this.hideContextMenu=function(){var n=i("gmaps_context_menu");n&&(n.style.display="none")},google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu),e=0;e<s.length;e++)(y=s[e])in n&&nt(this.map,y);for(e=0;e<c.length;e++)(y=c[e])in n&&nt(this.map,y);google.maps.event.addListener(this.map,"rightclick",function(t){n.rightclick&&n.rightclick.apply(this,[t]);null!=window.context_menu[f.el.id].map&&f.buildContextMenu("map",t)});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){for(var t=[],i=this.markers.length,n=0;n<i;n++)"boolean"==typeof this.markers[n].visible&&this.markers[n].visible&&t.push(this.markers[n].getPosition());this.fitLatLngBounds(t)};this.fitLatLngBounds=function(n){for(var r=n.length,i=new google.maps.LatLngBounds,t=0;t<r;t++)i.extend(n[t]);this.map.fitBounds(i)};this.setCenter=function(n,t,i){this.map.panTo(new google.maps.LatLng(n,t));i&&i()};this.getElement=function(){return this.el};this.zoomIn=function(n){n=n||1;this.zoom=this.map.getZoom()+n;this.map.setZoom(this.zoom)};this.zoomOut=function(n){n=n||1;this.zoom=this.map.getZoom()-n;this.map.setZoom(this.zoom)};w=[];for(p in this.map)"function"!=typeof this.map[p]||this[p]||w.push(p);for(r=0;r<w.length;r++)!function(n,t,i){n[i]=function(){return t[i].apply(t,arguments)}}(this,this.map,w[r])});return n.prototype.createControl=function(n){var i,r,t=document.createElement("div");for(i in t.style.cursor="pointer",!0!==n.disableDefaultStyles&&(t.style.fontFamily="Roboto, Arial, sans-serif",t.style.fontSize="11px",t.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px"),n.style)t.style[i]=n.style[i];for(r in n.id&&(t.id=n.id),n.title&&(t.title=n.title),n.classes&&(t.className=n.classes),n.content&&("string"==typeof n.content?t.innerHTML=n.content:n.content instanceof HTMLElement&&t.appendChild(n.content)),n.position&&(t.position=google.maps.ControlPosition[n.position.toUpperCase()]),n.events)!function(i){google.maps.event.addDomListener(t,i,function(){n.events[i].apply(this,[this])})}(r);return t.index=1,t},n.prototype.addControl=function(n){return n=this.createControl(n),this.controls.push(n),this.map.controls[n.position].push(n),n},n.prototype.removeControl=function(n){for(var r,i=null,t=0;t<this.controls.length;t++)this.controls[t]==n&&(i=this.controls[t].position,this.controls.splice(t,1));if(i)for(t=0;t<this.map.controls.length;t++)if(r=this.map.controls[n.position],r.getAt(t)==n){r.removeAt(t);break}return n},n.prototype.createMarker=function(n){var i,e,r;if(null==n.lat&&null==n.lng&&null==n.position)throw"No latitude or longitude defined.";var f=this,h=n.details,c=n.fences,l=n.outside,u={position:new google.maps.LatLng(n.lat,n.lng),map:null};if(delete(u=t(u,n)).lat,delete u.lng,delete u.fences,delete u.outside,i=new google.maps.Marker(u),i.fences=c,n.infoWindow)for(i.infoWindow=new google.maps.InfoWindow(n.infoWindow),e=["closeclick","content_changed","domready","position_changed","zindex_changed"],r=0;r<e.length;r++)!function(t,i){n.infoWindow[i]&&google.maps.event.addListener(t,i,function(t){n.infoWindow[i].apply(this,[t])})}(i.infoWindow,e[r]);for(var o=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],s=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],r=0;r<o.length;r++)!function(t){n[t]&&google.maps.event.addListener(i,t,function(){n[t].apply(this,[this])})}(o[r]);for(r=0;r<s.length;r++)!function(t,r){n[r]&&google.maps.event.addListener(i,r,function(i){i.pixel||(i.pixel=t.getProjection().fromLatLngToPoint(i.latLng));n[r].apply(this,[i])})}(this.map,s[r]);return google.maps.event.addListener(i,"click",function(){this.details=h;n.click&&n.click.apply(this,[this]);i.infoWindow&&(f.hideInfoWindows(),i.infoWindow.open(f.map,i))}),google.maps.event.addListener(i,"rightclick",function(t){t.marker=this;n.rightclick&&n.rightclick.apply(this,[t]);null!=window.context_menu[f.el.id].marker&&f.buildContextMenu("marker",t)}),i.fences&&google.maps.event.addListener(i,"dragend",function(){f.checkMarkerGeofence(i,function(n,t){l(n,t)})}),i},n.prototype.addMarker=function(t){var i;if(t.hasOwnProperty("gm_accessors_"))i=t;else{if(!(t.hasOwnProperty("lat")&&t.hasOwnProperty("lng")||t.position))throw"No latitude or longitude defined.";i=this.createMarker(t)}return i.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(i),this.markers.push(i),n.fire("marker_added",i,this),i},n.prototype.addMarkers=function(n){for(var t,i=0;t=n[i];i++)this.addMarker(t);return this.markers},n.prototype.hideInfoWindows=function(){for(var n,t=0;n=this.markers[t];t++)n.infoWindow&&n.infoWindow.close()},n.prototype.removeMarker=function(t){for(var i=0;i<this.markers.length;i++)if(this.markers[i]===t){this.markers[i].setMap(null);this.markers.splice(i,1);this.markerClusterer&&this.markerClusterer.removeMarker(t);n.fire("marker_removed",t,this);break}return t},n.prototype.removeMarkers=function(t){var u=[],f,r,i;if(void 0===t){for(i=0;i<this.markers.length;i++)(r=this.markers[i]).setMap(null),n.fire("marker_removed",r,this);this.markerClusterer&&this.markerClusterer.clearMarkers&&this.markerClusterer.clearMarkers();this.markers=u}else{for(i=0;i<t.length;i++)f=this.markers.indexOf(t[i]),-1<f&&((r=this.markers[f]).setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(r),n.fire("marker_removed",r,this));for(i=0;i<this.markers.length;i++)null!=(r=this.markers[i]).getMap()&&u.push(r);this.markers=u}},n.prototype.drawOverlay=function(n){var t=new google.maps.OverlayView,i=!0;return t.setMap(this.map),null!=n.auto_show&&(i=n.auto_show),t.onAdd=function(){var i=document.createElement("div"),u,f,e,r;for(i.style.borderStyle="none",i.style.borderWidth="0px",i.style.position="absolute",i.style.zIndex=100,i.innerHTML=n.content,t.el=i,n.layer||(n.layer="overlayLayer"),u=this.getPanes(),f=["contextmenu","DOMMouseScroll","dblclick","mousedown"],u[n.layer].appendChild(i),r=0;r<f.length;r++)e=f[r],google.maps.event.addDomListener(i,e,function(n){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(n.cancelBubble=!0,n.returnValue=!1):n.stopPropagation()});n.click&&(u.overlayMouseTarget.appendChild(t.el),google.maps.event.addDomListener(t.el,"click",function(){n.click.apply(t,[t])}));google.maps.event.trigger(this,"ready")},t.draw=function(){var u=this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(n.lat,n.lng));n.horizontalOffset=n.horizontalOffset||0;n.verticalOffset=n.verticalOffset||0;var r=t.el,f=r.children[0],e=f.clientHeight,o=f.clientWidth;switch(n.verticalAlign){case"top":r.style.top=u.y-e+n.verticalOffset+"px";break;default:case"middle":r.style.top=u.y-e/2+n.verticalOffset+"px";break;case"bottom":r.style.top=u.y+n.verticalOffset+"px"}switch(n.horizontalAlign){case"left":r.style.left=u.x-o+n.horizontalOffset+"px";break;default:case"center":r.style.left=u.x-o/2+n.horizontalOffset+"px";break;case"right":r.style.left=u.x+n.horizontalOffset+"px"}r.style.display=i?"block":"none";i||n.show.apply(this,[r])},t.onRemove=function(){var i=t.el;n.remove?n.remove.apply(this,[i]):(t.el.parentNode.removeChild(t.el),t.el=null)},this.overlays.push(t),t},n.prototype.removeOverlay=function(n){for(var t=0;t<this.overlays.length;t++)if(this.overlays[t]===n){this.overlays[t].setMap(null);this.overlays.splice(t,1);break}},n.prototype.removeOverlays=function(){for(var n,t=0;n=this.overlays[t];t++)n.setMap(null);this.overlays=[]},n.prototype.drawPolyline=function(t){var f=[],r=t.path,e,o,i;if(r.length)if(void 0===r[0][0])f=r;else for(o=0;e=r[o];o++)f.push(new google.maps.LatLng(e[0],e[1]));i={map:this.map,path:f,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,geodesic:t.geodesic,clickable:!0,editable:!1,visible:!0};t.hasOwnProperty("clickable")&&(i.clickable=t.clickable);t.hasOwnProperty("editable")&&(i.editable=t.editable);t.hasOwnProperty("icons")&&(i.icons=t.icons);t.hasOwnProperty("zIndex")&&(i.zIndex=t.zIndex);for(var u=new google.maps.Polyline(i),h=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],s=0;s<h.length;s++)!function(n){t[n]&&google.maps.event.addListener(u,n,function(i){t[n].apply(this,[i])})}(h[s]);return this.polylines.push(u),n.fire("polyline_added",u,this),u},n.prototype.removePolyline=function(t){for(var i=0;i<this.polylines.length;i++)if(this.polylines[i]===t){this.polylines[i].setMap(null);this.polylines.splice(i,1);n.fire("polyline_removed",t,this);break}},n.prototype.removePolylines=function(){for(var n,t=0;n=this.polylines[t];t++)n.setMap(null);this.polylines=[]},n.prototype.drawCircle=function(n){delete(n=t({map:this.map,center:new google.maps.LatLng(n.lat,n.lng)},n)).lat;delete n.lng;for(var i=new google.maps.Circle(n),u=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],r=0;r<u.length;r++)!function(t){n[t]&&google.maps.event.addListener(i,t,function(i){n[t].apply(this,[i])})}(u[r]);return this.polygons.push(i),i},n.prototype.drawRectangle=function(n){var u;n=t({map:this.map},n);u=new google.maps.LatLngBounds(new google.maps.LatLng(n.bounds[0][0],n.bounds[0][1]),new google.maps.LatLng(n.bounds[1][0],n.bounds[1][1]));n.bounds=u;for(var i=new google.maps.Rectangle(n),f=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],r=0;r<f.length;r++)!function(t){n[t]&&google.maps.event.addListener(i,t,function(i){n[t].apply(this,[i])})}(f[r]);return this.polygons.push(i),i},n.prototype.drawPolygon=function(i){var u=!1;i.hasOwnProperty("useGeoJSON")&&(u=i.useGeoJSON);delete i.useGeoJSON;i=t({map:this.map},i);0==u&&(i.paths=[i.paths.slice(0)]);0<i.paths.length&&0<i.paths[0].length&&(i.paths=s(o(i.paths,f,u)));for(var r=new google.maps.Polygon(i),h=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],e=0;e<h.length;e++)!function(n){i[n]&&google.maps.event.addListener(r,n,function(t){i[n].apply(this,[t])})}(h[e]);return this.polygons.push(r),n.fire("polygon_added",r,this),r},n.prototype.removePolygon=function(t){for(var i=0;i<this.polygons.length;i++)if(this.polygons[i]===t){this.polygons[i].setMap(null);this.polygons.splice(i,1);n.fire("polygon_removed",t,this);break}},n.prototype.removePolygons=function(){for(var n,t=0;n=this.polygons[t];t++)n.setMap(null);this.polygons=[]},n.prototype.getFromFusionTables=function(n){var i=n.events,r,t;delete n.events;t=new google.maps.FusionTablesLayer(n);for(r in i)!function(n){google.maps.event.addListener(t,n,function(t){i[n].apply(this,[t])})}(r);return this.layers.push(t),t},n.prototype.loadFromFusionTables=function(n){return(n=this.getFromFusionTables(n)).setMap(this.map),n},n.prototype.getFromKML=function(n){var u=n.url,i=n.events,r,t;delete n.url;delete n.events;t=new google.maps.KmlLayer(u,n);for(r in i)!function(n){google.maps.event.addListener(t,n,function(t){i[n].apply(this,[t])})}(r);return this.layers.push(t),t},n.prototype.loadFromKML=function(n){return(n=this.getFromKML(n)).setMap(this.map),n},n.prototype.addLayer=function(n,t){var i,r;switch(t=t||{},n){case"weather":this.singleLayers.weather=i=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=i=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=i=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=i=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=i=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=i=new google.maps.panoramio.PanoramioLayer;i.setTag(t.filter);delete t.filter;t.click&&google.maps.event.addListener(i,"click",function(n){t.click(n);delete t.click});break;case"places":this.singleLayers.places=i=new google.maps.places.PlacesService(this.map);(t.search||t.nearbySearch||t.radarSearch)&&(r={bounds:t.bounds||null,keyword:t.keyword||null,location:t.location||null,name:t.name||null,radius:t.radius||null,rankBy:t.rankBy||null,types:t.types||null},t.radarSearch&&i.radarSearch(r,t.radarSearch),t.search&&i.search(r,t.search),t.nearbySearch&&i.nearbySearch(r,t.nearbySearch));t.textSearch&&(r={bounds:t.bounds||null,location:t.location||null,query:t.query||null,radius:t.radius||null},i.textSearch(r,t.textSearch))}if(void 0!==i)return"function"==typeof i.setOptions&&i.setOptions(t),"function"==typeof i.setMap&&i.setMap(this.map),i},n.prototype.removeLayer=function(n){if("string"==typeof n&&void 0!==this.singleLayers[n])this.singleLayers[n].setMap(null),delete this.singleLayers[n];else for(var t=0;t<this.layers.length;t++)if(this.layers[t]===n){this.layers[t].setMap(null);this.layers.splice(t,1);break}},n.prototype.getRoutes=function(n){var i,u;switch(n.travelMode){case"bicycling":r=google.maps.TravelMode.BICYCLING;break;case"transit":r=google.maps.TravelMode.TRANSIT;break;case"driving":r=google.maps.TravelMode.DRIVING;break;default:r=google.maps.TravelMode.WALKING}c="imperial"===n.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;i=t({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},n);i.origin=/string/.test(typeof n.origin)?n.origin:new google.maps.LatLng(n.origin[0],n.origin[1]);i.destination=/string/.test(typeof n.destination)?n.destination:new google.maps.LatLng(n.destination[0],n.destination[1]);i.travelMode=r;i.unitSystem=c;delete i.callback;delete i.error;u=[];(new google.maps.DirectionsService).route(i,function(t,i){if(i===google.maps.DirectionsStatus.OK){for(var r in t.routes)t.routes.hasOwnProperty(r)&&u.push(t.routes[r]);n.callback&&n.callback(u,t,i)}else n.error&&n.error(t,i)})},n.prototype.removeRoutes=function(){this.routes.length=0},n.prototype.getElevations=function(n){var i,u,r;0<(n=t({locations:[],path:!1,samples:256},n)).locations.length&&0<n.locations[0].length&&(n.locations=s(o([n.locations],f,!1)));i=n.callback;delete n.callback;r=new google.maps.ElevationService;n.path?(u={path:n.locations,samples:n.samples},r.getElevationAlongPath(u,function(n,t){i&&"function"==typeof i&&i(n,t)})):(delete n.path,delete n.samples,r.getElevationForLocations(n,function(n,t){i&&"function"==typeof i&&i(n,t)}))},n.prototype.cleanRoute=n.prototype.removePolylines,n.prototype.renderRoute=function(n,i){var r,u="string"==typeof i.panel?document.getElementById(i.panel.replace("#","")):i.panel;i.panel=u;i=t({map:this.map},i);r=new google.maps.DirectionsRenderer(i);this.getRoutes({origin:n.origin,destination:n.destination,travelMode:n.travelMode,waypoints:n.waypoints,unitSystem:n.unitSystem,error:n.error,avoidHighways:n.avoidHighways,avoidTolls:n.avoidTolls,optimizeWaypoints:n.optimizeWaypoints,callback:function(n,t,i){i===google.maps.DirectionsStatus.OK&&r.setDirections(t)}})},n.prototype.drawRoute=function(n){var t=this;this.getRoutes({origin:n.origin,destination:n.destination,travelMode:n.travelMode,waypoints:n.waypoints,unitSystem:n.unitSystem,error:n.error,avoidHighways:n.avoidHighways,avoidTolls:n.avoidTolls,optimizeWaypoints:n.optimizeWaypoints,callback:function(i){var r;0<i.length&&(r={path:i[i.length-1].overview_path,strokeColor:n.strokeColor,strokeOpacity:n.strokeOpacity,strokeWeight:n.strokeWeight},n.hasOwnProperty("icons")&&(r.icons=n.icons),t.drawPolyline(r),n.callback&&n.callback(i[i.length-1]))}})},n.prototype.travelRoute=function(n){if(n.origin&&n.destination)this.getRoutes({origin:n.origin,destination:n.destination,travelMode:n.travelMode,waypoints:n.waypoints,unitSystem:n.unitSystem,error:n.error,callback:function(t){var i,u,f,r;if((0<t.length&&n.start&&n.start(t[t.length-1]),0<t.length&&n.step)&&(i=t[t.length-1],0<i.legs.length))for(f=i.legs[0].steps,r=0;u=f[r];r++)u.step_number=r,n.step(u,i.legs[0].steps.length-1);0<t.length&&n.end&&n.end(t[t.length-1])}});else if(n.route&&0<n.route.legs.length)for(var t,r=n.route.legs[0].steps,i=0;t=r[i];i++)t.step_number=i,n.step(t)},n.prototype.drawSteppedRoute=function(n){var u=this,t,f,i,r;if(n.origin&&n.destination)this.getRoutes({origin:n.origin,destination:n.destination,travelMode:n.travelMode,waypoints:n.waypoints,error:n.error,callback:function(t){var i,r,o,f,e;if((0<t.length&&n.start&&n.start(t[t.length-1]),0<t.length&&n.step)&&(i=t[t.length-1],0<i.legs.length))for(o=i.legs[0].steps,f=0;r=o[f];f++)r.step_number=f,e={path:r.path,strokeColor:n.strokeColor,strokeOpacity:n.strokeOpacity,strokeWeight:n.strokeWeight},n.hasOwnProperty("icons")&&(e.icons=n.icons),u.drawPolyline(e),n.step(r,i.legs[0].steps.length-1);0<t.length&&n.end&&n.end(t[t.length-1])}});else if(n.route&&0<n.route.legs.length)for(f=n.route.legs[0].steps,i=0;t=f[i];i++)t.step_number=i,r={path:t.path,strokeColor:n.strokeColor,strokeOpacity:n.strokeOpacity,strokeWeight:n.strokeWeight},n.hasOwnProperty("icons")&&(r.icons=n.icons),u.drawPolyline(r),n.step(t)},n.Route=function(n){this.origin=n.origin;this.destination=n.destination;this.waypoints=n.waypoints;this.map=n.map;this.route=n.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;var t={path:new google.maps.MVCArray,strokeColor:n.strokeColor,strokeOpacity:n.strokeOpacity,strokeWeight:n.strokeWeight};n.hasOwnProperty("icons")&&(t.icons=n.icons);this.polyline=this.map.drawPolyline(t).getPath()},n.Route.prototype.getRoute=function(n){var t=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:n.travelMode,waypoints:this.waypoints||[],error:n.error,callback:function(){t.route=e[0];n.callback&&n.callback.call(t)}})},n.Route.prototype.back=function(){if(0<this.step_count){this.step_count--;var n,t=this.route.legs[0].steps[this.step_count].path;for(n in t)t.hasOwnProperty(n)&&this.polyline.pop()}},n.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var n,t=this.route.legs[0].steps[this.step_count].path;for(n in t)t.hasOwnProperty(n)&&this.polyline.push(t[n]);this.step_count++}},n.prototype.checkGeofence=function(n,t,i){return i.containsLatLng(new google.maps.LatLng(n,t))},n.prototype.checkMarkerGeofence=function(n,t){var i,r,u;if(n.fences)for(r=0;i=n.fences[r];r++)u=n.getPosition(),this.checkGeofence(u.lat(),u.lng(),i)||t(n,i)},n.prototype.toImage=function(t){var t=t||{},i={},r;if(i.size=t.size||[this.el.clientWidth,this.el.clientHeight],i.lat=this.getCenter().lat(),i.lng=this.getCenter().lng(),0<this.markers.length)for(i.markers=[],r=0;r<this.markers.length;r++)i.markers.push({lat:this.markers[r].getPosition().lat(),lng:this.markers[r].getPosition().lng()});return 0<this.polylines.length&&(t=this.polylines[0],i.polyline={},i.polyline.path=google.maps.geometry.encoding.encodePath(t.getPath()),i.polyline.strokeColor=t.strokeColor,i.polyline.strokeOpacity=t.strokeOpacity,i.polyline.strokeWeight=t.strokeWeight),n.staticMapURL(i)},n.staticMapURL=function(n){function d(n,t){if("#"===n[0]&&(n=n.replace("#","0x"),t)){if(t=parseFloat(t),0===(t=Math.min(1,Math.max(t,0))))return"0x00000000";1===(t=(255*t).toString(16)).length&&(t+=t);n=n.slice(0,8)+t}return n}var i=[],w=("file:"===location.protocol?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap",c,o,u,f,b,r,s,l,a,v,k,t,e,y,g,h,p;n.url&&(w=n.url,delete n.url);w+="?";c=n.markers;delete n.markers;!c&&n.marker&&(c=[n.marker],delete n.marker);o=n.styles;delete n.styles;e=n.polyline;delete n.polyline;n.center?(i.push("center="+n.center),delete n.center):n.address?(i.push("center="+n.address),delete n.address):n.lat?(i.push(["center=",n.lat,",",n.lng].join("")),delete n.lat,delete n.lng):n.visible&&(u=encodeURI(n.visible.join("|")),i.push("visible="+u));u=n.size;for(s in u?(u.join&&(u=u.join("x")),delete n.size):u="630x300",i.push("size="+u),n.zoom||!1===n.zoom||(n.zoom=15),u=!n.hasOwnProperty("sensor")||!!n.sensor,delete n.sensor,i.push("sensor="+u),n)n.hasOwnProperty(s)&&i.push(s+"="+n[s]);if(c)for(r=0;t=c[r];r++){for(s in f=[],t.size&&"normal"!==t.size?(f.push("size:"+t.size),delete t.size):t.icon&&(f.push("icon:"+encodeURI(t.icon)),delete t.icon),t.color&&(f.push("color:"+t.color.replace("#","0x")),delete t.color),t.label&&(f.push("label:"+t.label[0].toUpperCase()),delete t.label),b=t.address||t.lat+","+t.lng,delete t.address,delete t.lat,delete t.lng,t)t.hasOwnProperty(s)&&f.push(s+":"+t[s]);f.length||0===r?(f.push(b),f=f.join("|"),i.push("markers="+encodeURI(f))):(f=i.pop()+encodeURI("|"+b),i.push(f))}if(o)for(r=0;r<o.length;r++){for(l=[],o[r].featureType&&l.push("feature:"+o[r].featureType.toLowerCase()),o[r].elementType&&l.push("element:"+o[r].elementType.toLowerCase()),h=0;h<o[r].stylers.length;h++)for(a in o[r].stylers[h])v=o[r].stylers[h][a],"hue"!=a&&"color"!=a||(v="0x"+v.substring(1)),l.push(a+":"+v);k=l.join("|");""!=k&&i.push("style="+k)}if(e){if(t=e,e=[],t.strokeWeight&&e.push("weight:"+parseInt(t.strokeWeight,10)),t.strokeColor&&(u=d(t.strokeColor,t.strokeOpacity),e.push("color:"+u)),t.fillColor&&(p=d(t.fillColor,t.fillOpacity),e.push("fillcolor:"+p)),y=t.path,y.join)for(h=0;g=y[h];h++)e.push(g.join(","));else e.push("enc:"+y);e=e.join("|");i.push("path="+encodeURI(e))}return p=window.devicePixelRatio||1,i.push("scale="+p),w+i.join("&")},n.prototype.addMapType=function(n,t){if(!t.hasOwnProperty("getTileUrl")||"function"!=typeof t.getTileUrl)throw"'getTileUrl' function required.";t.tileSize=t.tileSize||new google.maps.Size(256,256);t=new google.maps.ImageMapType(t);this.map.mapTypes.set(n,t)},n.prototype.addOverlayMapType=function(n){if(!n.hasOwnProperty("getTile")||"function"!=typeof n.getTile)throw"'getTile' function required.";var t=n.index;delete n.index;this.map.overlayMapTypes.insertAt(t,n)},n.prototype.removeOverlayMapType=function(n){this.map.overlayMapTypes.removeAt(n)},n.prototype.addStyle=function(n){var t=new google.maps.StyledMapType(n.styles,{name:n.styledMapName});this.map.mapTypes.set(n.mapTypeId,t)},n.prototype.setStyle=function(n){this.map.setMapTypeId(n)},n.prototype.createPanorama=function(t){return t.hasOwnProperty("lat")&&t.hasOwnProperty("lng")||(t.lat=this.getCenter().lat(),t.lng=this.getCenter().lng()),this.panorama=n.createPanorama(t),this.map.setStreetView(this.panorama),this.panorama},n.createPanorama=function(n){var o=i(n.el,n.context),f,r;n.position=new google.maps.LatLng(n.lat,n.lng);delete n.el;delete n.context;delete n.lat;delete n.lng;for(var u=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],e=t({visible:!0},n),r=0;r<u.length;r++)delete e[u[r]];for(f=new google.maps.StreetViewPanorama(o,e),r=0;r<u.length;r++)!function(t){n[t]&&google.maps.event.addListener(f,t,function(){n[t].apply(this)})}(u[r]);return f},n.prototype.on=function(t,i){return n.on(t,this,i)},n.prototype.off=function(t){n.off(t,this)},n.prototype.once=function(t,i){return n.once(t,this,i)},n.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],n.on=function(t,i,r){return-1==n.custom_events.indexOf(t)?(i instanceof n&&(i=i.map),google.maps.event.addListener(i,t,r)):(r={handler:r,eventName:t},i.registered_events[t]=i.registered_events[t]||[],i.registered_events[t].push(r),r)},n.off=function(t,i){-1==n.custom_events.indexOf(t)?(i instanceof n&&(i=i.map),google.maps.event.clearListeners(i,t)):i.registered_events[t]=[]},n.once=function(t,i,r){if(-1==n.custom_events.indexOf(t))return i instanceof n&&(i=i.map),google.maps.event.addListenerOnce(i,t,r)},n.fire=function(t,i,r){if(-1==n.custom_events.indexOf(t))google.maps.event.trigger(i,t,Array.prototype.slice.apply(arguments).slice(2));else if(t in r.registered_events)for(var f=r.registered_events[t],u=0;u<f.length;u++)f[u].handler.apply(r,[i])},n.geolocate=function(n){var t=n.always||n.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){n.success(i);t&&t()},function(i){n.error(i);t&&t()},n.options):(n.not_supported(),t&&t())},n.geocode=function(n){this.geocoder=new google.maps.Geocoder;var t=n.callback;n.hasOwnProperty("lat")&&n.hasOwnProperty("lng")&&(n.latLng=new google.maps.LatLng(n.lat,n.lng));delete n.lat;delete n.lng;delete n.callback;this.geocoder.geocode(n,function(n,i){t(n,i)})},"object"==typeof google&&window.google.maps&&(google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(){for(var n,t,r=new google.maps.LatLngBounds,u=this.getPaths(),i=0;i<u.getLength();i++)for(t=u.getAt(i),n=0;n<t.getLength();n++)r.extend(t.getAt(n));return r}),google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(n){var o=this.getBounds(),t,i;if(null!==o&&!o.contains(n))return!1;for(var u=!1,c=this.getPaths().getLength(),f=0;f<c;f++)for(var e=this.getPaths().getAt(f),s=e.getLength(),h=s-1,r=0;r<s;r++)t=e.getAt(r),i=e.getAt(h),(t.lng()<n.lng()&&i.lng()>=n.lng()||i.lng()<n.lng()&&t.lng()>=n.lng())&&t.lat()+(n.lng()-t.lng())/(i.lng()-t.lng())*(i.lat()-t.lat())<n.lat()&&(u=!u),h=r;return u}),google.maps.Circle.prototype.containsLatLng||(google.maps.Circle.prototype.containsLatLng=function(n){return!google.maps.geometry||google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),n)<=this.getRadius()}),google.maps.Rectangle.prototype.containsLatLng=function(n){return this.getBounds().contains(n)},google.maps.LatLngBounds.prototype.containsLatLng=function(n){return this.contains(n)},google.maps.Marker.prototype.setFences=function(n){this.fences=n},google.maps.Marker.prototype.addFence=function(n){this.fences.push(n)},google.maps.Marker.prototype.getId=function(){return this.__gm_id}),Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var u,r,t,i;if(null==this)throw new TypeError;if((u=Object(this),r=u.length>>>0,0==r)||(t=0,1<arguments.length&&((t=Number(arguments[1]))!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(0<t||-1)*Math.floor(Math.abs(t)))),r<=t))return-1;for(i=0<=t?t:Math.max(r-Math.abs(t),0);i<r;i++)if(i in u&&u[i]===n)return i;return-1}),n})